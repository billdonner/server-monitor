# Server Monitor â€” Dashboard Configuration

servers:
  # -- Custom servers (HTTP /metrics endpoint) --

  - name: "Alities Engine"
    type: http
    metrics_endpoint: "http://127.0.0.1:9847/metrics"
    web_url: "https://bd-alities-engine.fly.dev"
    poll_every: 15

  - name: "Nagzerver"
    type: http
    metrics_endpoint: "http://127.0.0.1:9800/api/v1/metrics"
    web_url: "https://bd-nagzerver.fly.dev"
    poll_every: 30

  - name: "Server Monitor"
    type: http
    metrics_endpoint: "http://127.0.0.1:9860/metrics"
    web_url: "https://bd-server-monitor.fly.dev"
    poll_every: 10

  # -- Standard services (native protocol) --

  - name: "Redis"
    type: redis
    host: "localhost"
    port: 6379
    poll_every: 10

  - name: "Postgres (Nagz)"
    type: postgres
    dsn: "postgresql://nagz:nagz@localhost:5433/nagz"
    system_stats: true
    poll_every: 15
    queries:
      - label: "Open Nags"
        sql: "SELECT COUNT(*) as value FROM nags WHERE status = 'open'"
        color: yellow
        warn_above: 100
        poll_every: 30

      - label: "Failed Deliveries"
        sql: "SELECT COUNT(*) as value FROM deliveries WHERE status = 'failed'"
        color: red
        warn_above: 10
        poll_every: 60

  - name: "card-engine"
    type: http
    metrics_endpoint: "http://127.0.0.1:9810/metrics"
    web_url: "https://bd-card-engine.fly.dev"
    poll_every: 15

  - name: "Advice App"
    type: http
    metrics_endpoint: "http://127.0.0.1:9820/metrics"
    poll_every: 15
