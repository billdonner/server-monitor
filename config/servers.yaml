# Server Monitor â€” Local Development Configuration

servers:
  # -- Nagzerver + its database --

  - name: "Nagzerver"
    type: http
    metrics_endpoint: "http://127.0.0.1:9800/api/v1/metrics"
    web_url: "https://bd-nagzerver.fly.dev"
    poll_every: 30

  - name: "Postgres (Nagzerver)"
    type: postgres
    dsn: "postgresql://nagz:nagz@localhost:5433/nagz"
    system_stats: true
    poll_every: 15
    queries:
      - label: "Open Nags"
        sql: "SELECT COUNT(*) as value FROM nags WHERE status = 'open'"
        color: yellow
        warn_above: 100
        poll_every: 30

      - label: "Failed Deliveries"
        sql: "SELECT COUNT(*) as value FROM deliveries WHERE status = 'failed'"
        color: red
        warn_above: 10
        poll_every: 60

  - name: "Redis (Nagzerver)"
    type: redis
    host: "localhost"
    port: 6379
    poll_every: 10

  # -- Cardzerver + its database --

  - name: "Cardzerver"
    type: http
    metrics_endpoint: "http://127.0.0.1:9810/metrics"
    web_url: "https://bd-cardzerver.fly.dev"
    poll_every: 15

  # -- Other services --

  - name: "Advice App"
    type: http
    metrics_endpoint: "http://127.0.0.1:9820/metrics"
    poll_every: 15

  - name: "Server Monitor"
    type: http
    metrics_endpoint: "http://127.0.0.1:9860/metrics"
    web_url: "https://bd-server-monitor.fly.dev"
    poll_every: 10
