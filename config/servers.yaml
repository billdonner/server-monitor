# Server Monitor â€” Dashboard Configuration

servers:
  # -- Custom servers (HTTP /metrics endpoint) --

  - name: "Alities Engine"
    type: http
    metrics_endpoint: "http://127.0.0.1:9847/metrics"
    poll_every: 15

  - name: "Nagzerver"
    type: http
    metrics_endpoint: "http://127.0.0.1:9800/api/v1/metrics"
    poll_every: 30

  # -- Standard services (native protocol) --

  - name: "Redis"
    type: redis
    host: "localhost"
    port: 6379
    poll_every: 10

  - name: "Postgres (Nagz)"
    type: postgres
    dsn: "postgresql://nagz:nagz@localhost:5433/nagz"
    system_stats: true
    poll_every: 15
    queries:
      - label: "Open Nags"
        sql: "SELECT COUNT(*) as value FROM nags WHERE status = 'open'"
        color: yellow
        warn_above: 100
        poll_every: 30

      - label: "Failed Deliveries (1h)"
        sql: "SELECT COUNT(*) as value FROM deliveries WHERE status = 'failed' AND created_at > NOW() - INTERVAL '1 hour'"
        color: red
        warn_above: 10
        poll_every: 60
